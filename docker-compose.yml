version: "3.9"
services:
  back-runner:
    image: soduco/back_runner
    build:
      context: .
      dockerfile: soduco-back-runner.Dockerfile
    volumes:
      - ./resources/data:/data
      - ./resources/annotations:/data/annotations
      - ./resources/directories:/data/directories
    ports:
      - "8000:8000"
    depends_on:
      - "back-builder"

  back-builder:
    image : soduco/back_builder
    build:
      context: .
      dockerfile: soduco-back-cppbuilder.Dockerfile
    working_dir: /app
    volumes:
      - ./resources/code:/app/
